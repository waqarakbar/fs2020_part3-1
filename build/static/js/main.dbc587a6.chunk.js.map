{"version":3,"sources":["components/Person.js","components/Persons.js","components/PersonForm.js","components/Filter.js","services/persons.js","components/Notification.js","components/NotificationError.js","App.js","index.js"],"names":["Person","person","deletePerson","name","number","onClick","id","Persons","persons","map","i","key","PersonForm","props","onSubmit","handleSubmit","value","newName","onChange","handleNameChange","newNumber","handleNumberChange","type","Filter","search","handleSearchChange","baseUrl","axios","get","then","res","data","newObject","post","updateObject","put","delete","Notification","message","className","NotificationError","App","useState","setPersons","setNewName","setNewNumber","setSearch","setMessage","messageError","setMessageError","useEffect","personService","initialPersons","filteredPersons","length","filter","toLowerCase","includes","e","target","preventDefault","personExists_r","personExists","window","confirm","updatedPersonObj","p","setTimeout","catch","error","newPerson","concat","thisPerson","find","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.dbc587a6.chunk.js","sourcesContent":["import React from 'react';\n\nconst Person = ({person, deletePerson}) => {\n\n\t// console.log('person->', person)\n\n\treturn (\n\t\t<div>\n\t\t\t{person.name} {person.number} \n\t\t\t<button onClick={() => deletePerson(person.id)}>Delete</button>\n\t\t</div>\n\t)\n}\n\nexport default Person","import React from 'react'\nimport Person from './Person'\n\nconst Persons = ({persons, deletePerson}) => {\n\n\t// console.log('person->', person)\n\n\treturn (\n\t\t<div>\n\t\t\t{persons.map((person, i) => <Person key={person.name} person={person} deletePerson={deletePerson} />)}\n\t\t</div>\n\t)\n}\n\nexport default Persons","import React from 'react';\n\nconst PersonForm = (props) => {\n\t  \n\treturn (\n\t\t<div>\n\t\t\t<form onSubmit={props.handleSubmit}>\n\t\t\t\t<div>name: <input value={props.newName} onChange={props.handleNameChange}/></div>\n\t\t\t\t<div>number: <input value={props.newNumber} onChange={props.handleNumberChange}/></div>\n\t\t\t\t<div>\n\t\t\t\t<button type=\"submit\">add</button>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div>\n\t)\n}\n\nexport default PersonForm","import React from 'react';\n\nconst Filter = (props) => {\n\t  \n\treturn (\n\t\t<div>\n\t\t\t<div>filter shown with <input value={props.search} onChange={props.handleSearchChange}/></div>\n\t\t</div>\n\t)\n}\n\nexport default Filter","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n\tconst request = axios.get(baseUrl);\n\treturn request.then(res => res.data)\n}\n\nconst create = (newObject) => {\n\tconst request = axios.post(baseUrl, newObject)\n\treturn request.then(res => res.data)\n}\n\nconst update = (id, updateObject) => {\n\tconst request = axios.put(`${baseUrl}/${id}`, updateObject)\n\treturn request.then(res => res.data)\n}\n\nconst deletePerson = (id) => {\n\tconst request = axios.delete(`${baseUrl}/${id}`)\n\treturn request.then(res => res.data)\n}\n\nexport default {getAll, create, update, deletePerson}","import React from 'react'\n\nconst Notification = ({message}) => {\n\tif(message === null){\n\t\treturn null\n\t}\n\n\treturn (\n\t\t<div className=\"message\">\n\t\t\t{message}\n\t\t</div>\n\t)\n}\n\nexport default Notification","import React from 'react'\n\nconst NotificationError = ({message}) => {\n\tif(message === null){\n\t\treturn null\n\t}\n\n\treturn (\n\t\t<div className=\"message_error\">\n\t\t\t{message}\n\t\t</div>\n\t)\n}\n\nexport default NotificationError","import React, { useState, useEffect } from 'react'\nimport Persons from './components/Persons'\nimport PersonForm from './components/PersonForm'\nimport Filter from './components/Filter'\nimport personService from './services/persons'\nimport Notification from './components/Notification'\nimport NotificationError from './components/NotificationError'\n\n\nconst App = () => {\n  \n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [search, setSearch] = useState('')\n  const [message, setMessage] = useState(null)\n  const [messageError, setMessageError] = useState(null)\n\n  const handleNameChange = (e) => {\n    // console.log(e.target.value)\n    setNewName(e.target.value)\n  }\n\n  const handleNumberChange = (e) => {\n    // console.log(e.target.value)\n    setNewNumber(e.target.value)\n  }\n\n  const handleSearchChange = (e) => {\n    // console.log(e.target.value)\n    setSearch(e.target.value)\n  }\n\n\n  useEffect(() => {\n    // console.log('effect')\n    personService\n    .getAll()\n    .then(initialPersons => {\n      // console.log('promis fulfilled')\n      setPersons(initialPersons)\n    })\n  }, [])\n\n  // console.log(persons);\n\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    // check if the newName already exist\n    const personExists_r = persons.filter(person => person.name.toLowerCase() === newName.toLowerCase())\n    if(personExists_r.length > 0){\n      const personExists = {...personExists_r[0]}\n      // console.log(personExists);\n      if(window.confirm(`${newName} is already added to phonebook, replace the older number with the new one?`)){\n        const updatedPersonObj = {...personExists, number:newNumber}\n        // console.log('updated', updatedPersonObj);\n        personService\n        .update(personExists.id, updatedPersonObj)\n        .then(res => {\n          setPersons(persons.map(p => p.id === personExists.id ? res : p))\n          setNewName('')\n          setNewNumber('')\n          \n          setMessage(`Contact number of ${res.name} has been updated to ${res.number}`)\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n\n        }).catch(error => {\n          setMessageError('This contact has already been deleted')\n          setTimeout(() => {\n            setMessageError(null)\n          }, 5000)\n          setPersons(persons.filter(p => p.id !== personExists.id))\n        })\n      }\n    }else{\n      const newPersonObj = {\n        name: newName,\n        number: newNumber\n      }\n      personService\n      .create(newPersonObj)\n      .then(newPerson => {\n        setPersons(persons.concat(newPerson))\n\n        setMessage(`New contact of ${newPerson.name} has been saved`)\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n\n      })\n    }\n    setNewName('')\n    setNewNumber('')\n  }\n\n  const deletePerson = (id) => {\n    const thisPerson = persons.find(p => p.id === id)\n    // console.log(thisPerson)\n    if(window.confirm(`Delete ${thisPerson.name}?`)){\n      personService\n      .deletePerson(id)\n      .then(res => {\n\n        setMessage(`${thisPerson.name} has been deleted`)\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n\n        setPersons(persons.filter(p => p.id !== id))\n      })\n    }\n\n    \n\t}\n  \n  // console.log(persons)\n  const filteredPersons = (search.length > 0) ? persons.filter(person => person.name.toLowerCase().includes(search.toLowerCase())) : persons\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <NotificationError message={messageError} />\n      <Filter search={search} handleSearchChange={handleSearchChange}/>\n      \n      <h2>Add a new</h2>\n      <PersonForm handleSubmit={handleSubmit} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange} />\n\n      <h2>Numbers</h2>\n      <Persons persons={filteredPersons} deletePerson={deletePerson} />\n\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}